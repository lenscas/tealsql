<!doctype html><head id=head><link href=https://unpkg.com/bulmaswatch/default/bulmaswatch.min.css id=bulma-theme rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><meta content="width=device-width,initial-scale=1" name=viewport><meta charset=utf-8><link integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA==" crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-light.min.css id=codeHighlight referrerpolicy=no-referrer rel=stylesheet><script integrity="sha512-IaaKO80nPNs5j+VLxd42eK/7sYuXQmr+fyywCNA0e+C6gtQnuCXNtORe9xR4LqGPz5U9VpH+ff41wKs/ZmC3iA==" crossorigin referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js></script><title>index</title><style>#app,body,html{height:100%}#app{min-height:100%}.footer{margin-top:-12px}.hideable-state:checked+.hideable-content {display:block!important}.sticky-sidebar{height:calc(100vh - 3.25rem);position:sticky;top:0;overflow:auto}.max-width{max-width:100%}.hidden-themes-selector{display:none}</style><body><div id=app><nav class="navbar has-shadow"><div class=navbar-brand><div class="navbar-item is-hidden-desktop"><label aria-expanded=false aria-label=menu class=navbar-burger for=menu-toggle role=button><span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span></label></div></div><div class=navbar-menu id=navbar-id><div class=navbar-start><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link hidden-themes-selector"> Themes </a><div class="navbar-dropdown is-boxed"><div class=columns><div class="collumn theme-select-column1"></div><div class="collumn theme-select-column2"></div></div></div></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link> Definition files </a><div class="navbar-dropdown is-boxed"><a class=navbar-item href=definitions/tealsql.d.tl>teal</a></div></div></div></div></nav><section class="main-content columns is-fullheight"><input class="is-hidden hideable-state" id=menu-toggle type=checkbox><aside class="column is-2 is-narrow-mobile is-fullheight section is-hidden-touch sticky-sidebar hideable-content" id=sidebar><div class=is-hidden-desktop><div class="dropdown is-hoverable"><div class=dropdown-trigger><label class="button hidden-themes-selector" aria-controls=dropdown-menu4 aria-haspopup=true for=theme-toggle><span>Themes</span> <span class="icon is-small"> <i class="fa fa-angle-down" aria-hidden=true></i> </span></label></div><input class="is-hidden hideable-state" id=theme-toggle type=checkbox><div class="dropdown-menu hideable-content" id=dropdown-menu4 role=menu><div class=dropdown-content><div class=columns><div class="collumn theme-select-column1"></div><div class="collumn theme-select-column2"></div></div></div></div></div><div class="dropdown is-hoverable"><div class=dropdown-trigger><label aria-controls=dropdown-menu5 aria-haspopup=true class=button for=definition-files-toggle><span>Def files</span> <span class="icon is-small"> <i class="fa fa-angle-down" aria-hidden=true></i> </span></label></div><input class="is-hidden hideable-state" id=definition-files-toggle type=checkbox><div class="dropdown-menu hideable-content" id=dropdown-menu5 role=menu><div class=dropdown-content><a class=navbar-item href=definitions/tealsql.d.tl>teal</a></div></div></div></div><p class="menu-label is-hidden-touch">Navigation<ul class=menu-list><li><a class={is_active} href=/tealsql/index.html> <span class=icon><i class="fa fa-file"></i></span> tealsql </a> <ul><li><a href=/tealsql/index.html#connect_pool> <span class="icon is-small"><i class="fa fa-link"></i></span> connect_pool </a><li><a href=/tealsql/index.html#gen_json> <span class="icon is-small"><i class="fa fa-link"></i></span> gen_json </a><li><a href=/tealsql/index.html#connect> <span class="icon is-small"><i class="fa fa-link"></i></span> connect </a><li><a href=/tealsql/index.html#nul> <span class="icon is-small"><i class="fa fa-link"></i></span> nul </a><li><a href=/tealsql/index.html#interval> <span class="icon is-small"><i class="fa fa-link"></i></span> interval </a><li><a href=/tealsql/index.html#help> <span class="icon is-small"><i class="fa fa-link"></i></span> help </a><li><a href=/tealsql/index.html#__index> <span class="icon is-small"><i class="fa fa-link"></i></span> __index </a></ul><li><a class={is_active} href=/tealsql/Pool.html> <span class=icon><i class="fa fa-file"></i></span> Pool </a> <ul><li><a href=/tealsql/Pool.html#help> <span class="icon is-small"><i class="fa fa-link"></i></span> help </a><li><a href=/tealsql/Pool.html#get_connection> <span class="icon is-small"><i class="fa fa-link"></i></span> get_connection </a></ul><li><a class={is_active} href=/tealsql/Connection.html> <span class=icon><i class="fa fa-file"></i></span> Connection </a> <ul><li><a href=/tealsql/Connection.html#help> <span class="icon is-small"><i class="fa fa-link"></i></span> help </a><li><a href=/tealsql/Connection.html#fetch_optional> <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_optional </a><li><a href=/tealsql/Connection.html#fetch_all> <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_all </a><li><a href=/tealsql/Connection.html#fetch_all_async> <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_all_async </a><li><a href=/tealsql/Connection.html#execute> <span class="icon is-small"><i class="fa fa-link"></i></span> execute </a><li><a href=/tealsql/Connection.html#fetch_one> <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_one </a><li><a href=/tealsql/Connection.html#insert> <span class="icon is-small"><i class="fa fa-link"></i></span> insert </a><li><a href=/tealsql/Connection.html#bulk_insert> <span class="icon is-small"><i class="fa fa-link"></i></span> bulk_insert </a><li><a href=/tealsql/Connection.html#update> <span class="icon is-small"><i class="fa fa-link"></i></span> update </a><li><a href=/tealsql/Connection.html#upsert> <span class="icon is-small"><i class="fa fa-link"></i></span> upsert </a><li><a href=/tealsql/Connection.html#delete> <span class="icon is-small"><i class="fa fa-link"></i></span> delete </a><li><a href=/tealsql/Connection.html#begin> <span class="icon is-small"><i class="fa fa-link"></i></span> begin </a></ul><li><a class={is_active} href=/tealsql/Stream.html> <span class=icon><i class="fa fa-file"></i></span> Stream </a> <ul><li><a href=/tealsql/Stream.html#iter> <span class="icon is-small"><i class="fa fa-link"></i></span> iter </a><li><a href=/tealsql/Stream.html#help> <span class="icon is-small"><i class="fa fa-link"></i></span> help </a><li><a href=/tealsql/Stream.html#try_next> <span class="icon is-small"><i class="fa fa-link"></i></span> try_next </a><li><a href=/tealsql/Stream.html#next> <span class="icon is-small"><i class="fa fa-link"></i></span> next </a><li><a href=/tealsql/Stream.html#loop_all> <span class="icon is-small"><i class="fa fa-link"></i></span> loop_all </a></ul><li><a class={is_active} href=/tealsql/Interval.html> <span class=icon><i class="fa fa-file"></i></span> Interval </a> <ul><li><a href=/tealsql/Interval.html#months> <span class="icon is-small"><i class="fa fa-link"></i></span> months </a><li><a href=/tealsql/Interval.html#days> <span class="icon is-small"><i class="fa fa-link"></i></span> days </a><li><a href=/tealsql/Interval.html#microseconds> <span class="icon is-small"><i class="fa fa-link"></i></span> microseconds </a></ul></ul></aside><div class="container column is-10"><div class=section><div class=panel><div class=panel-heading><h1 class=title>index</h1></div><div class=panel-block><div class="container max-width"><div class="panel max-width"><div class=panel-heading><p class=subtitle>Type doc:</div><div class=panel-block><div class="container max-width"><p>Tealsql is a sql library made to be easy and safe to use. Its RAII centric API prevents mistakes like forgetting to close connections. The library also makes prepared statements easy to use as it does the binding of parameters for you.<p>There are also several helper functions to do basic tasks like deleting, updating or inserting values. These allow you to quickly get something going without the need to write SQL for these basic operation<p>Lastly, this library is made with teal in mind. This means that a automatically generated <code>.d.tl</code> file is shipped with the dependency. Allowing teal users to always have correct type information about this library.<p>Further more: This library also has a CLI that acts similar to pgtyped but for teal. This gives teal users the ability to write totally type safe sql queries.</div></div></div><div class="panel max-width"><div class=panel-heading><p class=subtitle>Fields:</div><div class=panel-block><div class="container max-width"></div></div></div><div class="panel max-width"><div class=panel-heading><p class=subtitle>Methods:</div><div class=panel-block><div class="container max-width"><div class="card block"><div class=card-heading id=connect_pool><code class=card-header-title>
                        <p>connect_pool: function(string):( <a href=/tealsql/Pool.html>Pool</a> )</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>Connect to the server and create a connection pool<h2 class="subtitle is-H2">Params:</h2><ul><li>connection_string:The string used to connect to the server.</ul><h2 class="subtitle is-H2">Example:</h2><div class=tabs><ul><li class=select-teal><a>Teal</a><li class=select-lua><a>Lua</a></ul></div><div class=code-block-teal><pre><code class=language-lua>local tealsql = require("pages/tealsql/definitions.tealsql")
local pool = tealsql.connect_pool("postgres://userName:password@host/database")
local res = pool:get_connection(function(con:tealsql.Connection):{string:integer}
    return con:fetch_one("SELECT $1 as test",{2}) as {string:integer}
end)
assert(res.test ==  2)
</code></pre></div><div class=code-block-lua><pre><code class=language-lua>local tealsql = require("pages/tealsql/definitions.tealsql")
local pool = tealsql.connect_pool("postgres://userName:password@host/database")
local res = pool:get_connection(function(con)
   return con:fetch_one("SELECT $1 as test", { 2 })
end)
assert(res.test == 2)</code></pre></div></div></div></div><div class="card block"><div class=card-heading id=gen_json><code class=card-header-title>
                        <p>gen_json: function(boolean):(string)</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>Returns a json string representing the definitions of this library<p>This can be used to generate online documentation<h2 class="subtitle is-H2">Params:</h2><ul><li>pretty: If the json needs to be pretty printed or not</ul></div></div></div><div class="card block"><div class=card-heading id=connect><code class=card-header-title>
                        <p>connect: function&LTRes>(string , function( <a href=/tealsql/Connection.html>Connection</a> ):(Res)):(Res)</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>Connect to the server and create a single connection<h2 class="subtitle is-H2">Params:</h2><ul><li><p>connection_string: The string used to connect to the server.</p><li><p>func: The function that will be executed after the connection has been made.</p></ul><p>This function receives the connection object, which will be cleaned up after the function has been executed.<p>A value returned from this function will also be returned by the connect function<h2 class="subtitle is-H2">Example:</h2><div class=tabs><ul><li class=select-teal><a>Teal</a><li class=select-lua><a>Lua</a></ul></div><div class=code-block-teal><pre><code class=language-lua>local tealsql = require("pages/tealsql/definitions.tealsql")
local res = tealsql.connect("postgres://userName:password@host/database",function(con:tealsql.Connection):{string:integer}
    return con:fetch_one("SELECT $1 as test",{2}) as {string:integer}
end)
assert(res.test ==  2)
</code></pre></div><div class=code-block-lua><pre><code class=language-lua>local tealsql = require("pages/tealsql/definitions.tealsql")
local res = tealsql.connect("postgres://userName:password@host/database", function(con)
   return con:fetch_one("SELECT $1 as test", { 2 })
end)
assert(res.test == 2)</code></pre></div></div></div></div><div class="card block"><div class=card-heading id=nul><code class=card-header-title>
                        <p>nul: function():(any)</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>Returns the value used to represent <code>null</code> values in json.</div></div></div><div class="card block"><div class=card-heading id=interval><code class=card-header-title>
                        <p>interval: function(integer , integer , integer):( <a href=/tealsql/Interval.html>Interval</a> )</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>Creates the interval type from postgresql.<h2 class="subtitle is-H2">Params:</h2><ul><li><p>months: The amount of months in this interval. Defaults to 0</p><li><p>days: The amount of days in this interval. Defaults to 0</p><li><p>microseconds: The amount of microseconds in this interval. Defaults to 0</p></ul></div></div></div><div class="card block"><div class=card-heading id=help><code class=card-header-title>
                        <p>help: function(string):(string)</p>
                    </code></div></div><div class="card block"><div class=card-heading id=__index><code class=card-header-title>
                        <p>__index: function(string):(any)</p>
                    </code></div><div class="card-content content"><div class="container max-width"><p>You can index this type with <code>"null"</code> to get the value back that is used to represent null in json.</div></div></div></div></div></div><div class="panel max-width"><div class=panel-heading><p class=subtitle>Globals:</div><div class=panel-block><div class="container max-width"></div></div></div><div class="panel max-width"><div class=panel-heading><p class=subtitle>Types:</div><div class=panel-block><div class="container max-width"><div class="card block"><div id="table: 0x557b84e70dc0" class=card-heading><code class=card-header-title>
                                                                                <p><a href=/tealsql/Pool.html>Pool</a></p>
                                                                            </code></div><div class="card-content content"><div class="container max-width"><p>A connection pool containing at most 10 connections.<p>Opening a database connection for each and every operation to the database can quickly become expensive.<p>A connection pool is a standard technique that can manage opening and re-using connections. Normally it also enforces a maximum number of connections as these are an expensive resource on the database server.</div></div></div><div class="card block"><div id="table: 0x557b84fe8bf0" class=card-heading><code class=card-header-title>
                                                                                <p><a href=/tealsql/Connection.html>Connection</a></p>
                                                                            </code></div><div class="card-content content"><div class="container max-width"><p>A single database connection</div></div></div><div class="card block"><div id="table: 0x557b84f3b4f0" class=card-heading><code class=card-header-title>
                                                                                <p><a href=/tealsql/Stream.html>Stream</a></p>
                                                                            </code></div><div class="card-content content"><div class="container max-width"><p>Returned from connection:fetch_all_async(). It allows you to do other things while the query is running in a background thread.</div></div></div><div class="card block"><div id="table: 0x557b84f41a70" class=card-heading><code class=card-header-title>
                                                                                <p><a href=/tealsql/Interval.html>Interval</a></p>
                                                                            </code></div><div class="card-content content"><div class="container max-width"></div></div></div></div></div></div></div></div></div></div></div></section></div><script>document.querySelectorAll(".hidden-themes-selector").forEach(a=>a.classList.remove("hidden-themes-selector"));const bulmaTheme=document.getElementById("bulma-theme");const isDarkTheme={"Cerulean":false,"Cosmo":false,"Cyborg":true,"Darkly":true,"Default":false,"Flatly":false,"Journal":false,"Litera":false,"Lumen":false,"Lux":false,"Materia":false,"Minty":false,"Nuclear":true,"Pulse":false,"Sandstone":false,"Simplex":false,"Slate":true,"Solar":true,"Spacelab":false,"Superhero":true,"United":false,"Yeti":false};const lightHighlight=` <link id="codeHighlight" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-light.min.css"
        integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />`;const darkHighlight=`<link id="codeHighlight" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-dark.min.css"
integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
crossorigin="anonymous" referrerpolicy="no-referrer" />`;const setTheme=(a,b)=>{bulmaTheme.href=a;document.getElementById("codeHighlight").remove();const c=document.getElementById("head");if(isDarkTheme[b]){c.insertAdjacentHTML("beforeend",darkHighlight)}else{c.insertAdjacentHTML("beforeend",lightHighlight)}};const v=localStorage.getItem("editor_last_selected");try{if(v){const a=JSON.parse(v);if(a&&a.name&&a.url){setTheme(a.url,a.name)}}}catch(a){console.error("Error while setting saved theme. Going back to default",a);localStorage.removeItem("editor_last_selected")};fetch("https://jenil.github.io/bulmaswatch/api/themes.json").then(a=>a.json()).then(a=>{const b=a.themes.length/2;const c=document.querySelectorAll(".theme-select-column1");const d=document.querySelectorAll(".theme-select-column2");a.themes.forEach((e,f)=>{const g=h=>{const i=document.createElement("a");i.onclick=()=>{console.log("got in click");setTheme(e.css,e.name);localStorage.setItem("editor_last_selected",JSON.stringify({url:e.css,name:e.name}))};i.text=e.name;const j=document.createElement("div");j.classList.add("navbar-item");j.appendChild(i);j.addEventListener("click",()=>{console.log("in div click")});h.appendChild(j)};if(f<b){c.forEach(g)}else{d.forEach(g)}})});const getOpposite=a=>a=="teal"?"lua":"teal";const preferredLanguage=localStorage.getItem("last_selected_language")||"teal";const disableLanguage=getOpposite(preferredLanguage);const elementsToDisable=document.getElementsByClassName("code-block-"+ disableLanguage);for(var i=0;i<elementsToDisable.length;i++){elementsToDisable[i].style.display="none"};const createSwitchLanguage=a=>()=>{const c=getOpposite(a);const d=document.getElementsByClassName("code-block-"+ a);for(var b=0;b<d.length;b++){d[b].style.display=""};const e=document.getElementsByClassName("code-block-"+ c);for(var b=0;b<e.length;b++){e[b].style.display="none"};const f=document.getElementsByClassName("select-"+ c);for(var b=0;b<f.length;b++){f[b].classList.remove("is-active")};const g=document.getElementsByClassName("select-"+ a);for(var b=0;b<g.length;b++){g[b].classList.add("is-active")};localStorage.setItem("last_selected_language",a)};const elementsToSetActive=document.getElementsByClassName("select-"+ preferredLanguage);for(var i=0;i<elementsToSetActive.length;i++){elementsToSetActive[i].classList.add("is-active");elementsToSetActive[i].onclick=createSwitchLanguage(preferredLanguage)};const otherLangSelectors=document.getElementsByClassName("select-"+ disableLanguage);for(var i=0;i<otherLangSelectors.length;i++){otherLangSelectors[i].onclick=createSwitchLanguage(disableLanguage)}</script><script>hljs.highlightAll()</script>
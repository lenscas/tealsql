<!DOCTYPE html>
<html>

<head id="head">
    <link id="bulma-theme" rel="stylesheet" href="https://unpkg.com/bulmaswatch/default/bulmaswatch.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link id="codeHighlight" rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-light.min.css"
        integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-dark.min.css" -->
    <!-- integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg==" -->
    <!-- crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"
        integrity="sha512-IaaKO80nPNs5j+VLxd42eK/7sYuXQmr+fyywCNA0e+C6gtQnuCXNtORe9xR4LqGPz5U9VpH+ff41wKs/ZmC3iA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>/tealsql/libpgteal</title>
    <style>
        html,
        body,
        #app {
            height: 100%;
        }

        #app {
            min-height: 100%;
        }

        .footer {
            margin-top: -12px;
        }

        @media screen and (max-width: 768px) {
            #menu-toggle:checked+.nav-menu {
                display: block;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <nav class="navbar has-shadow">
            <div class="navbar-menu">
                <div class="navbar-start">
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a class="navbar-link">
                            Themes
                        </a>
                        <div class="navbar-dropdown is-boxed">
                            <div class="columns">
                                <div class="collumn" id="theme-select-column1"></div>
                                <div class="collumn" id="theme-select-column2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <section class="main-content columns is-fullheight">
            <aside class="column is-2 is-narrow-mobile is-fullheight section is-hidden-mobile">
                <p class="menu-label is-hidden-touch">Navigation</p>
                <ul class="menu-list">
                    <li>
                    <a href="/tealsql/index.html" class="is-active">
                        <span class="icon"><i class="fa fa-file"></i></span> /tealsql/libpgteal
                    </a>
                    <ul>
                       
                       <li>Methods</li>
            <li>
    <a href="/tealsql/index.html#connect_pool">
        <span class="icon is-small"><i class="fa fa-link"></i></span> connect_pool
    </a>
</li><li>
    <a href="/tealsql/index.html#gen_defs">
        <span class="icon is-small"><i class="fa fa-link"></i></span> gen_defs
    </a>
</li><li>
    <a href="/tealsql/index.html#gen_json">
        <span class="icon is-small"><i class="fa fa-link"></i></span> gen_json
    </a>
</li><li>
    <a href="/tealsql/index.html#connect">
        <span class="icon is-small"><i class="fa fa-link"></i></span> connect
    </a>
</li><li>
    <a href="/tealsql/index.html#nul">
        <span class="icon is-small"><i class="fa fa-link"></i></span> nul
    </a>
</li><li>
    <a href="/tealsql/index.html#interval">
        <span class="icon is-small"><i class="fa fa-link"></i></span> interval
    </a>
</li><li>
    <a href="/tealsql/index.html#help">
        <span class="icon is-small"><i class="fa fa-link"></i></span> help
    </a>
</li><li>
    <a href="/tealsql/index.html#__index">
        <span class="icon is-small"><i class="fa fa-link"></i></span> __index
    </a>
</li>
                    </ul>
                </li><li>
                    <a href="/tealsql/Pool.html" class="">
                        <span class="icon"><i class="fa fa-file"></i></span> Pool
                    </a>
                    <ul>
                       
                       <li>Methods</li>
            <li>
    <a href="/tealsql/Pool.html#get_connection">
        <span class="icon is-small"><i class="fa fa-link"></i></span> get_connection
    </a>
</li><li>
    <a href="/tealsql/Pool.html#help">
        <span class="icon is-small"><i class="fa fa-link"></i></span> help
    </a>
</li>
                    </ul>
                </li><li>
                    <a href="/tealsql/Connection.html" class="">
                        <span class="icon"><i class="fa fa-file"></i></span> Connection
                    </a>
                    <ul>
                       
                       <li>Methods</li>
            <li>
    <a href="/tealsql/Connection.html#fetch_optional">
        <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_optional
    </a>
</li><li>
    <a href="/tealsql/Connection.html#fetch_all">
        <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_all
    </a>
</li><li>
    <a href="/tealsql/Connection.html#fetch_all_async">
        <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_all_async
    </a>
</li><li>
    <a href="/tealsql/Connection.html#execute">
        <span class="icon is-small"><i class="fa fa-link"></i></span> execute
    </a>
</li><li>
    <a href="/tealsql/Connection.html#fetch_one">
        <span class="icon is-small"><i class="fa fa-link"></i></span> fetch_one
    </a>
</li><li>
    <a href="/tealsql/Connection.html#insert">
        <span class="icon is-small"><i class="fa fa-link"></i></span> insert
    </a>
</li><li>
    <a href="/tealsql/Connection.html#update">
        <span class="icon is-small"><i class="fa fa-link"></i></span> update
    </a>
</li><li>
    <a href="/tealsql/Connection.html#delete">
        <span class="icon is-small"><i class="fa fa-link"></i></span> delete
    </a>
</li><li>
    <a href="/tealsql/Connection.html#begin">
        <span class="icon is-small"><i class="fa fa-link"></i></span> begin
    </a>
</li><li>
    <a href="/tealsql/Connection.html#help">
        <span class="icon is-small"><i class="fa fa-link"></i></span> help
    </a>
</li>
                    </ul>
                </li><li>
                    <a href="/tealsql/Stream.html" class="">
                        <span class="icon"><i class="fa fa-file"></i></span> Stream
                    </a>
                    <ul>
                       
                       <li>Methods</li>
            <li>
    <a href="/tealsql/Stream.html#iter">
        <span class="icon is-small"><i class="fa fa-link"></i></span> iter
    </a>
</li><li>
    <a href="/tealsql/Stream.html#try_next">
        <span class="icon is-small"><i class="fa fa-link"></i></span> try_next
    </a>
</li><li>
    <a href="/tealsql/Stream.html#next">
        <span class="icon is-small"><i class="fa fa-link"></i></span> next
    </a>
</li><li>
    <a href="/tealsql/Stream.html#help">
        <span class="icon is-small"><i class="fa fa-link"></i></span> help
    </a>
</li>
                    </ul>
                </li><li>
                    <a href="/tealsql/Interval.html" class="">
                        <span class="icon"><i class="fa fa-file"></i></span> Interval
                    </a>
                    <ul>
                       <li>Fields</li>
            <li>
    <a href="/tealsql/Interval.html#months">
        <span class="icon is-small"><i class="fa fa-link"></i></span> months
    </a>
</li><li>
    <a href="/tealsql/Interval.html#days">
        <span class="icon is-small"><i class="fa fa-link"></i></span> days
    </a>
</li><li>
    <a href="/tealsql/Interval.html#microseconds">
        <span class="icon is-small"><i class="fa fa-link"></i></span> microseconds
    </a>
</li>
                       
                    </ul>
                </li>
                </ul>
            </aside>
            <div class="container column is-10">
                <div class="section">
                    <div class="panel">
                        <div class="panel-heading">
                            <h1 class="title">/tealsql/libpgteal</h1>
                        </div>
                        <div class="panel-block">
                            <div class="container">
<div class="panel block">
            <div class="panel-heading">
                <p class="subtitle">
                    Type doc:
                </p>
            </div>
            <div class="panel-block">
                <div class="container">
                    <p>Tealsql is a sql library made to be easy and safe to use. Its RAII centric API prevents mistakes like forgetting to close connections.
The library also makes prepared statements easy to use as it does the binding of parameters for you.</p>
<p>There are also several helper functions to do basic tasks like deleting, updating or inserting values. These allow you to quickly get something going without the need to write SQL for these basic operation</p>
<p>Lastly, this library is made with teal in mind. This means that a automatically generated <code>.d.tl</code> file is shipped with the dependency. Allowing teal users to always have correct type information about this library.</p>
<p>Further more: This library also has a CLI that acts similar to pgtyped but for teal. This gives teal users the ability to write totally type safe sql queries.</p>

                </div>
            </div>
        </div>
        <div class="panel block">
            <div class="panel-heading">
                <p class="subtitle">
                    Fields:
                </p>
            </div>
            <div class="panel-block">
                
            </div>

        </div>
        <div class="panel block">
            <div class="panel-heading">
                <p class="subtitle">
                    Methods:
                </p>
            </div>
            <div class="panel-block">
                <div class="container">
                    <div class="card block">
                        <div class="card-heading" id="connect_pool">
                            <code class="card-header-title"><p> connect_pool: function(string):(<a href="Pool.html">Pool</a>)</p></code>
                        </div>
                        <div class="card-content content"><p>Connect to the server and create a connection pool</p>
<h2>Params:</h2>
<ul>
<li>connection_string:The string used to connect to the server.</li>
</ul>
<h2>Example:</h2>
<div class="tabs"><ul><li class="select-teal"><a>Teal</a></li><li class="select-lua"><a>Lua</a></li></ul></div><div class="code-block-teal">
<pre><code class="language-lua">
local tealsql = require&quot;libpgteal&quot;
local pool = tealsql.connect_pool(&quot;postgres://userName:password@host/database&quot;)
local res = pool:get_connection(function(con:tealsql.Connection):{string:integer}
    return con:fetch_one(&quot;SELECT $1 as test&quot;,{2}) as {string:integer}
end)
assert(res.test ==  2)
</code></pre>
</div><div class="code-block-lua">
<pre><code class="language-lua">
local tealsql = require(&quot;libpgteal&quot;)
local pool = tealsql.connect_pool(&quot;postgres://userName:password@host/database&quot;)
local res = pool:get_connection(function(con)
   return con:fetch_one(&quot;SELECT $1 as test&quot;, { 2 })
end)
assert(res.test == 2)</code></pre>
</div></div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="gen_defs">
                            <code class="card-header-title"><p> gen_defs: function():(string)</p></code>
                        </div>
                        <div class="card-content content"><p>Returns the <code>.d.tl</code> file of this library.</p>
</div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="gen_json">
                            <code class="card-header-title"><p> gen_json: function(boolean):(string)</p></code>
                        </div>
                        <div class="card-content content"><p>Returns a json string representing the definitions of this library</p>
<p>This can be used to generate online documentation</p>
<h2>Params:</h2>
<ul>
<li>pretty: If the json needs to be pretty printed or not</li>
</ul>
</div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="connect">
                            <code class="card-header-title"><p> connect: function&lt;Res&gt;((string),(function(<a href="Connection.html">Connection</a>):(Res))):(Res)</p></code>
                        </div>
                        <div class="card-content content"><p>Connect to the server and create a single connection</p>
<h2>Params:</h2>
<ul>
<li>
<p>connection_string: The string used to connect to the server.</p>
</li>
<li>
<p>func: The function that will be executed after the connection has been made.</p>
</li>
</ul>
<p>This function receives the connection object, which will be cleaned up after the function has been executed.</p>
<p>A value returned from this function will also be returned by the connect function</p>
<h2>Example:</h2>
<div class="tabs"><ul><li class="select-teal"><a>Teal</a></li><li class="select-lua"><a>Lua</a></li></ul></div><div class="code-block-teal">
<pre><code class="language-lua">
local tealsql = require&quot;libpgteal&quot;
local res = tealsql.connect(&quot;postgres://userName:password@host/database&quot;,function(con:tealsql.Connection):{string:integer}
    return con:fetch_one(&quot;SELECT $1 as test&quot;,{2}) as {string:integer}
end)
assert(res.test ==  2)
</code></pre>
</div><div class="code-block-lua">
<pre><code class="language-lua">
local tealsql = require(&quot;libpgteal&quot;)
local res = tealsql.connect(&quot;postgres://userName:password@host/database&quot;, function(con)
   return con:fetch_one(&quot;SELECT $1 as test&quot;, { 2 })
end)
assert(res.test == 2)</code></pre>
</div></div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="nul">
                            <code class="card-header-title"><p> nul: function():(any)</p></code>
                        </div>
                        <div class="card-content content"><p>Returns the value used to represent <code>null</code> values in json.</p>
</div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="interval">
                            <code class="card-header-title"><p> interval: function((integer),(integer),(integer)):(<a href="Interval.html">Interval</a>)</p></code>
                        </div>
                        <div class="card-content content"><p>Creates the interval type from postgresql.</p>
<h2>Params:</h2>
<ul>
<li>
<p>months: The amount of months in this interval. Defaults to 0</p>
</li>
<li>
<p>days: The amount of days in this interval. Defaults to 0</p>
</li>
<li>
<p>microseconds: The amount of microseconds in this interval. Defaults to 0</p>
</li>
</ul>
</div>
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="help">
                            <code class="card-header-title"><p> help: function(string):(string)</p></code>
                        </div>
                        
                    </div>
                    <div class="card block">
                        <div class="card-heading" id="__index">
                            <code class="card-header-title"><p>metamethod __index: function(string):(any)</p></code>
                        </div>
                        <div class="card-content content"><p>You can index this type with <code>&quot;null&quot;</code> to get the value back that is used to represent null in json.</p>
</div>
                    </div></div>
            </div>
        </div><div class="panel">
            <div class="panel-heading">
                <p class="panel-header-title">Types:</p>
            </div>
            <div class="panel-block">
                <div class="container">
        <div class="card block"><a href="/tealsql/raw_name.html"><div class="card-header"><code class="card-header-title">Pool</code></div> <div class="card-content content"><p>A connection pool containing at most 10 connections.</p>
<p>Opening a database connection for each and every operation to the database can quickly become expensive.</p>
<p>A connection pool is a standard technique that can manage opening and re-using connections. Normally it also enforces a maximum number of connections as these are an expensive resource on the database server.</p>
</div></a></div><div class="card block"><a href="/tealsql/raw_name.html"><div class="card-header"><code class="card-header-title">Connection</code></div> <div class="card-content content"><p>A single database connection</p>
</div></a></div><div class="card block"><a href="/tealsql/raw_name.html"><div class="card-header"><code class="card-header-title">Stream</code></div> <div class="card-content content"><p>Returned from connection:fetch_all_async(). It allows you to do other things while the query is running in a background thread.</p>
</div></a></div><div class="card block"><a href="/tealsql/raw_name.html"><div class="card-header"><code class="card-header-title">Interval</code></div> <div class="card-content content"></div></a></div></div></div>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <script>
        const bulmaTheme = document.getElementById("bulma-theme")
        const isDarkTheme = {
            "Cerulean": false,
            "Cosmo": false,
            "Cyborg": true,
            "Darkly": true,
            "Default": false,
            "Flatly": false,
            "Journal": false,
            "Litera": false,
            "Lumen": false,
            "Lux": false,
            "Materia": false,
            "Minty": false,
            "Nuclear": true,
            "Pulse": false,
            "Sandstone": false,
            "Simplex": false,
            "Slate": true,
            "Solar": true,
            "Spacelab": false,
            "Superhero": true,
            "United": false,
            "Yeti": false
        }
        const lightHighlight = ` <link id="codeHighlight" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-light.min.css"
        integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />`
        const darkHighlight = `<link id="codeHighlight" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/a11y-dark.min.css"
integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
crossorigin="anonymous" referrerpolicy="no-referrer" />`
        const setTheme = (str, name) => {
            bulmaTheme.href = str;
            document.getElementById("codeHighlight").remove()
            const head = document.getElementById("head")
            if (isDarkTheme[name]) {
                head.insertAdjacentHTML("beforeend", darkHighlight)
            } else {
                head.insertAdjacentHTML("beforeend", lightHighlight)
            }
        }
        const v = localStorage.getItem("editor_last_selected");
        try {
            if (v) {
                const res = JSON.parse(v);
                if (res && res.name && res.url) {
                    setTheme(res.url, res.name)
                }
            }
        } catch (e) {
            console.error("Error while setting saved theme. Going back to default", e)
            localStorage.removeItem("editor_last_selected")
        }

        fetch("https://jenil.github.io/bulmaswatch/api/themes.json")
            .then(x => x.json())
            .then(x => {

                const max = x.themes.length / 2
                const col1 = document.getElementById("theme-select-column1")
                const col2 = document.getElementById("theme-select-column2")
                x.themes.forEach((z, k) => {
                    const a = document.createElement("a")
                    a.onclick = () => {
                        setTheme(z.css, z.name)
                        localStorage.setItem(
                            "editor_last_selected",
                            JSON.stringify({ url: z.css, name: z.name })
                        );
                    }
                    a.text = z.name;
                    const div = document.createElement("div")
                    div.classList.add("navbar-item")
                    div.appendChild(a)
                    if (k < max) {
                        col1.appendChild(div)
                    } else {
                        col2.appendChild(div)
                    }
                })
            })
        const getOpposite = (language) => language == "teal" ? "lua" : "teal"
        const preferredLanguage = localStorage.getItem("last_selected_language") || "teal";
        const disableLanguage = getOpposite(preferredLanguage)
        const elementsToDisable = document.getElementsByClassName("code-block-" + disableLanguage)
        for (var i = 0; i < elementsToDisable.length; i++) {
            elementsToDisable[i].style.display = "none"
        }

        const createSwitchLanguage = (newLang) =>
            () => {
                const oppositeLanguage = getOpposite(newLang)
                const toShow = document.getElementsByClassName("code-block-" + newLang)

                for (var i = 0; i < toShow.length; i++) {
                    toShow[i].style.display = ""; // or
                }
                const toHide = document.getElementsByClassName("code-block-" + oppositeLanguage)
                for (var i = 0; i < toHide.length; i++) {
                    toHide[i].style.display = "none";
                }
                const removeFromActive = document.getElementsByClassName("select-" + oppositeLanguage)
                for (var i = 0; i < removeFromActive.length; i++) {
                    removeFromActive[i].classList.remove("is-active")
                }
                const addToActive = document.getElementsByClassName("select-" + newLang)
                for (var i = 0; i < addToActive.length; i++) {
                    addToActive[i].classList.add("is-active")
                }
                localStorage.setItem("last_selected_language", newLang)

            }

        const elementsToSetActive = document.getElementsByClassName("select-" + preferredLanguage)
        for (var i = 0; i < elementsToSetActive.length; i++) {
            elementsToSetActive[i].classList.add("is-active")
            elementsToSetActive[i].onclick = createSwitchLanguage(preferredLanguage)
        }
        const otherLangSelectors = document.getElementsByClassName("select-" + disableLanguage)
        for (var i = 0; i < otherLangSelectors.length; i++) {
            otherLangSelectors[i].onclick = createSwitchLanguage(disableLanguage)
        }

    </script>
    <script>hljs.highlightAll();</script>
</body>

</html>